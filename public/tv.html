<!DOCTYPE html>
<html>
<head>
	<title>Fubo TV Screen</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="preconnect" href="https://www.figma.com">
	<link rel="preconnect" href="https://embed.figma.com">
	<link rel="dns-prefetch" href="https://www.figma.com">
	<link rel="dns-prefetch" href="https://embed.figma.com">
	<style>
		body, html { 
			margin: 0; 
			padding: 0; 
			height: 100%; 
			overflow: hidden; 
			font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
			background: #000;
			color: #fff;
		}
		
		.loading-screen {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			z-index: 10000;
		}
		
		.loading-content {
			text-align: center;
			max-width: 600px;
			padding: 40px;
		}
		
		.loading-title {
			font-size: 48px;
			font-weight: bold;
			margin-bottom: 30px;
			text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
		}
		
		.loading-subtitle {
			font-size: 24px;
			margin-bottom: 40px;
			opacity: 0.9;
		}
		
		.loading-instructions {
			font-size: 18px;
			line-height: 1.6;
			margin-bottom: 40px;
			opacity: 0.8;
		}
		
		.loading-progress {
			width: 100%;
			height: 8px;
			background: rgba(255,255,255,0.2);
			border-radius: 4px;
			overflow: hidden;
			margin-bottom: 20px;
		}
		
		.loading-bar {
			height: 100%;
			background: linear-gradient(90deg, #4CAF50, #45a049);
			width: 0%;
			transition: width 0.3s ease;
		}
		
		.loading-status {
			font-size: 16px;
			opacity: 0.7;
		}

		.step-status {
			margin-top: 8px;
			font-size: 14px;
			opacity: 0.85;
		}

		.loading-cta {
			margin-top: 24px;
			padding: 12px 20px;
			background: #00d084;
			color: #00130d;
			border: none;
			border-radius: 6px;
			font-size: 16px;
			font-weight: 600;
			cursor: pointer;
			display: inline-block;
		}

		.loading-cta[disabled] {
			background: #666;
			color: #bbb;
			cursor: not-allowed;
			opacity: 0.6;
		}

		.loading-cta:active { transform: scale(0.99); }
		
		.tv-screen {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
		}
		
		iframe { 
			width: 100%; 
			height: 100%; 
			border: none;
			background: transparent;
			position: relative;
			z-index: 2;
		}
		
		.enter-hint {
			position: fixed;
			bottom: 20px;
			right: 20px;
			background: rgba(0,0,0,0.8);
			color: #fff;
			padding: 10px 15px;
			border-radius: 6px;
			font-size: 14px;
			opacity: 0;
			transition: opacity 0.3s ease;
			pointer-events: none;
		}
		
		.enter-hint.show {
			opacity: 1;
		}
	</style>
</head>
<body>
	<!-- Loading Screen -->
	<div id="loading-screen" class="loading-screen">
		<div class="loading-content">
			<div class="loading-title">ðŸŽ¬ Fubo TV Prototype</div>
			<div class="loading-subtitle">Loading your TV experience...</div>
			<div class="loading-instructions">
				<strong>How to use:</strong><br>
				â€¢ Click "Begin" to start<br>
				â€¢ Watch the content automatically<br>
				â€¢ When you see an action prompt, press <strong>ENTER</strong> to continue<br>
				â€¢ The prototype will guide you through the experience<br>
				â€¢ Sit back and enjoy the show!
			</div>
			<div class="loading-progress">
				<div id="loading-bar" class="loading-bar"></div>
			</div>
			<div id="loading-status" class="loading-status">Initializing...</div>
			<div id="step-status" class="step-status">Step 1/3: Preloadingâ€¦</div>
			<button id="begin-btn" class="loading-cta">Click to begin</button>
		</div>
	</div>
	
	<!-- TV Screen -->
	<div id="tv-screen" class="tv-screen">
		<video autoplay muted loop id="bg-video"></video>
		<iframe id="figma-embed" src="" tabindex="0"></iframe>
		<div id="enter-hint" class="enter-hint">Press ENTER to dismiss</div>
	</div>

	<script src="/socket.io/socket.io.js"></script>
	<script>
		const socket = io({ transports: ['websocket'], upgrade: false });
		const figmaFrame = document.getElementById('figma-embed');
		const loadingScreen = document.getElementById('loading-screen');
		const tvScreen = document.getElementById('tv-screen');
		const beginBtn = document.getElementById('begin-btn');
		const video = document.getElementById('bg-video');

		const figmaUrl = "https://www.figma.com/proto/MS5xgxLvmO3WCl40DKu89g/Yan-s-Sandbox?page-id=4337%3A33308&node-id=4465-39526&p=f&viewport=-1165%2C199%2C0.03&t=d5eqcn3KNhT00hrg-1&scaling=scale-down&content-scaling=fixed&starting-point-node-id=4465%3A39526";
		
		function toEmbedUrl(url, autoplay = 1) {
			if (!url) return '';
			const encoded = encodeURIComponent(url);
			return `https://www.figma.com/embed?embed_host=notion&hotspot-hints=0&hide-ui=1&autoplay=${autoplay}&url=${encoded}`;
		}

		function showTVScreen() {
			tvScreen.style.display = 'block';
			loadingScreen.style.display = 'none';
			video.src = "/NotifProtoVid_1.mp4";
			figmaFrame.src = toEmbedUrl(figmaUrl);
		}

		beginBtn.addEventListener('click', showTVScreen);

	</script>
</body>
</html>
